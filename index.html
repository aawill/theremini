<!DOCTYPE html>
<html>
<head>
<title>Theremini</title>
<meta charset="utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<style>

</style>
<script>
var audioCtx = new (window.AudioContext || window.webkitAudioContext);
var volume = audioCtx.createGain();
volume.connect(audioCtx.destination);
var filter = audioCtx.createBiquadFilter();
filter.connect(volume);
filter.type = "lowpass";
filter.frequency.value = 20000;

var osc1 = audioCtx.createOscillator();
osc1.frequency.value = 220;
osc1.type = "sine";
osc1.start();
osc1.connect(filter);
var osc2 = audioCtx.createOscillator();
osc2.frequency.value = 880;
osc2.type = "sine";
osc2.start();
osc2.connect(filter);
var osc3 = audioCtx.createOscillator();
osc3.frequency.value = 659.3;
osc3.type = "sine";
osc3.start();
osc3.connect(filter);
volume.gain.value=0.0;
 
function makeSine(button) {
    var oscName = button.parentElement.parentElement.getAttribute('id');
    if (oscName == "osc1Menu") osc1.type = "sine";
    else if (oscName == "osc2Menu") osc2.type = "sine";
    else if (oscName == "osc3Menu") osc3.type = "sine";
}    
function makeSquare(button) {
    var oscName = button.parentElement.parentElement.getAttribute('id');
    if (oscName == "osc1Menu") osc1.type = "square";
    else if (oscName == "osc2Menu") osc2.type = "square";
    else if (oscName == "osc3Menu") osc3.type = "square";
}
function makeSaw(button) {
    var oscName = button.parentElement.parentElement.getAttribute('id');
    if (oscName == "osc1Menu") osc1.type = "sawtooth";
    else if (oscName == "osc2Menu") osc2.type = "sawtooth";
    else if (oscName == "osc3Menu") osc3.type = "sawtooth";
}
function toggleSound() {
    audioCtx.resume();
   	if (volume.gain.value==0.0) {
        volume.gain.value=0.4;            
    }
    else {
        volume.gain.value=0.0;           
    }
}
</script>
</head>
<body>
<h3>Simple Synthesizer</h3>
<button id="soundBut" class="btn btn-success" onclick="toggleSound()">Toggle sound</button>
<br/>
<br/>
<h5>Select waveshape:</h5>
<div class="btn-group">
<div class="dropdown" id="osc1Menu">
  <button class="btn btn-primary dropdown-toggle" type="button" id="osc1Drop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  Osc1
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
    <button id="sineBut1" class="dropdown-item" type="button" onclick="makeSine(this)">Sine</button>
    <button id="squareBut1" class="dropdown-item" type="button" onclick="makeSquare(this)">Square</button>
    <button id="sawBut1" class="dropdown-item" type="button" onclick="makeSaw(this)">Sawtooth</button>
  </div>
</div>
<div class="dropdown" id="osc2Menu">
  <button class="btn btn-primary dropdown-toggle" type="button" id="osc2Drop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  Osc2
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
    <button id="sineBut2" class="dropdown-item" type="button" onclick="makeSine(this)">Sine</button>
    <button id="squareBut2" class="dropdown-item" type="button" onclick="makeSquare(this)">Square</button>
    <button id="sawBut2" class="dropdown-item" type="button" onclick="makeSaw(this)">Sawtooth</button>
  </div>
</div>
<div class="dropdown" id="osc3Menu">
  <button class="btn btn-primary dropdown-toggle" type="button" id="osc3Drop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  Osc3
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
    <button id="sineBut3" class="dropdown-item" type="button" onclick="makeSine(this)">Sine</button>
    <button id="squareBut3" class="dropdown-item" type="button" onclick="makeSquare(this)">Square</button>
    <button id="sawBut3" class="dropdown-item" type="button" onclick="makeSaw(this)">Sawtooth</button>
  </div>
</div>
</div>
	
</body>
</html>
